[gd_scene load_steps=15 format=3 uid="uid://jym00tuoxqch"]

[ext_resource type="PackedScene" uid="uid://cukn40ilg0yp3" path="res://assets/characters/Rogue_Hooded.glb" id="1_d7xhm"]
[ext_resource type="Script" uid="uid://b4m246jw57var" path="res://scripts/player.gd" id="2_ou4w3"]
[ext_resource type="PackedScene" uid="uid://c2u2s4onjaipf" path="res://assets/character_items/ak47.glb" id="3_abk0e"]
[ext_resource type="PackedScene" uid="uid://b8g3oxllmskyr" path="res://scenes/components/hit_box_component.tscn" id="4_fx6rw"]
[ext_resource type="PackedScene" uid="uid://dmk7fjqqm3a1i" path="res://scenes/components/health_component.tscn" id="5_v0w2y"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ou4w3"]
animation = &"Running_Strafe_Right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_abk0e"]
animation = &"Running_A"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fx6rw"]
animation = &"2H_Ranged_Shooting"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_v0w2y"]
animation = &"Running_Strafe_Left"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_atf0n"]
filter_enabled = true
filters = ["Rig/Skeleton3D:hand.l", "Rig/Skeleton3D:hand.r", "Rig/Skeleton3D:handslot.l", "Rig/Skeleton3D:handslot.r", "Rig/Skeleton3D:head", "Rig/Skeleton3D:lowerarm.l", "Rig/Skeleton3D:lowerarm.r", "Rig/Skeleton3D:spine", "Rig/Skeleton3D:upperarm.l", "Rig/Skeleton3D:upperarm.r"]

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_anfej"]
xfade_time = 0.3
input_0/name = "RunLeft"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "RunRight"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "Run"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_27mb0"]
graph_offset = Vector2(-658.132, 73.0235)
nodes/Animation/node = SubResource("AnimationNodeAnimation_v0w2y")
nodes/Animation/position = Vector2(-500, 200)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_ou4w3")
"nodes/Animation 2/position" = Vector2(-500, 380)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_abk0e")
"nodes/Animation 3/position" = Vector2(-480, 560)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_fx6rw")
"nodes/Animation 4/position" = Vector2(120, 380)
nodes/RunWeapon/node = SubResource("AnimationNodeBlend2_atf0n")
nodes/RunWeapon/position = Vector2(440, 260)
nodes/Transition/node = SubResource("AnimationNodeTransition_anfej")
nodes/Transition/position = Vector2(-100, 220)
nodes/output/position = Vector2(620, 220)
node_connections = [&"RunWeapon", 0, &"Transition", &"RunWeapon", 1, &"Animation 4", &"Transition", 0, &"Animation", &"Transition", 1, &"Animation 2", &"Transition", 2, &"Animation 3", &"output", 0, &"RunWeapon"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_v0w2y"]
radius = 0.7
height = 3.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_atf0n"]
radius = 0.7
height = 3.0

[node name="Player" instance=ExtResource("1_d7xhm")]
script = ExtResource("2_ou4w3")

[node name="Rig" parent="." index="0"]
transform = Transform3D(1.295, 0, 0, 0, 1.295, 0, 0, 0, 1.295, 0, -1.495, 0)

[node name="Skeleton3D" parent="Rig" index="0"]
bones/0/position = Vector3(0, 0.0306114, 0)
bones/1/position = Vector3(0, 0.4362, 0)
bones/1/rotation = Quaternion(0.0997064, -1.18615e-07, 1.18859e-08, 0.995017)
bones/2/rotation = Quaternion(0.0118441, -0.225168, -0.019766, 0.974047)
bones/3/rotation = Quaternion(0.0421342, -0.00164607, -0.00846825, 0.999075)
bones/4/position = Vector3(0.237825, 0.134132, 0.0707304)
bones/4/rotation = Quaternion(-0.51592, -0.441646, -0.733998, -0.00473188)
bones/5/rotation = Quaternion(5.57276e-08, -3.41265e-08, -0.714667, 0.699465)
bones/7/rotation = Quaternion(-0.328924, 0.332977, -0.298394, 0.831803)
bones/8/position = Vector3(8.34828e-10, 0.0961251, -0.0575)
bones/8/rotation = Quaternion(1.60975e-09, 1.60975e-09, -0.707107, 0.707107)
bones/10/position = Vector3(-0.205704, 0.134132, -0.0728219)
bones/10/rotation = Quaternion(-0.654659, 0.257688, 0.509393, 0.495517)
bones/11/rotation = Quaternion(2.84579e-08, 3.19278e-08, 0.75973, 0.650239)
bones/13/rotation = Quaternion(-0.211798, 0.493721, 0.328578, 0.7768)
bones/14/position = Vector3(-0.0037406, 0.0592296, -0.0753808)
bones/14/rotation = Quaternion(0.0182482, 0.0177895, 0.707211, 0.706543)
bones/19/rotation = Quaternion(-0.0201919, 0.171278, 0.0980508, 0.980124)
bones/21/position = Vector3(0.170945, 0.113587, -0.096005)
bones/21/rotation = Quaternion(0.998719, -2.30793e-07, -4.49729e-08, 0.0506094)
bones/22/rotation = Quaternion(0.66562, 5.15265e-08, -4.62253e-07, 0.746291)
bones/23/rotation = Quaternion(-0.215811, 6.64818e-08, 3.06931e-07, 0.976435)
bones/24/rotation = Quaternion(2.84997e-08, 0.877676, -0.479254, 5.73411e-08)
bones/25/position = Vector3(-0.170945, 0.113587, 0.0960051)
bones/25/rotation = Quaternion(0.818081, 2.33958e-07, -6.50026e-08, 0.575103)
bones/26/rotation = Quaternion(0.503004, -5.96732e-08, 3.49321e-07, 0.864284)
bones/27/rotation = Quaternion(-0.638425, 1.77127e-07, -1.68123e-07, 0.769684)
bones/28/rotation = Quaternion(3.04797e-08, 0.920355, -0.391084, -6.94848e-08)
bones/29/position = Vector3(0.170945, 0.331087, 0.61459)
bones/29/rotation = Quaternion(0.707107, -2.29302e-07, -4.60551e-08, 0.707107)
bones/30/position = Vector3(0.170945, 0.124718, -0.438898)
bones/30/rotation = Quaternion(0.158141, -9.54126e-08, 1.32055e-08, 0.987417)
bones/31/rotation = Quaternion(7.54953e-15, -1.38321e-22, 1, 4.44089e-16)
bones/32/position = Vector3(3.75294e-09, 0.213436, 0)
bones/32/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/33/position = Vector3(-6.31128e-09, 0.16565, -5.09137e-09)
bones/34/rotation = Quaternion(1, -1.33227e-15, 1.94707e-07, 0)
bones/36/position = Vector3(-0.170945, 0.331087, 0.61459)
bones/36/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/37/position = Vector3(-0.170945, 0.310123, 0.590489)
bones/37/rotation = Quaternion(-0.882209, -5.50287e-08, -8.25653e-08, 0.470858)
bones/38/position = Vector3(1.94581e-08, 0.362833, 5.96046e-08)
bones/38/rotation = Quaternion(7.10544e-15, -1.38321e-22, 1, -2.22045e-16)
bones/39/position = Vector3(3.75294e-09, 0.213436, 2.14539e-08)
bones/39/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/40/position = Vector3(-6.31128e-09, 0.16565, 2.282e-08)
bones/41/rotation = Quaternion(1, 4.44087e-16, 1.94707e-07, 1.54616e-29)
bones/43/position = Vector3(0.453508, 0.906761, -0.688859)
bones/43/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/44/position = Vector3(0.513182, 0.810422, 0.140232)
bones/44/rotation = Quaternion(0.660943, 0.462206, 0.535132, 0.251306)
bones/45/position = Vector3(-0.453507, 0.906761, -0.68886)
bones/45/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/46/position = Vector3(-0.513182, 0.810422, 0.140232)
bones/46/rotation = Quaternion(-0.660943, 0.462206, 0.535132, -0.251305)

[node name="Knife_Offhand" parent="Rig/Skeleton3D" index="0"]
transform = Transform3D(0.975227, 0.220889, 0.0118097, -0.041634, 0.130857, 0.990526, 0.217251, -0.96648, 0.136812, -0.123399, 0.944589, 0.626857)
visible = false

[node name="1H_Crossbow" parent="Rig/Skeleton3D" index="1"]
transform = Transform3D(0.999772, 0.0139624, 0.016097, -0.0118529, 0.992157, -0.124428, -0.0177078, 0.124209, 0.992097, -0.416495, 1.04791, 0.00912793)
visible = false

[node name="2H_Crossbow" parent="Rig/Skeleton3D" index="2"]
transform = Transform3D(0.999772, 0.0139624, 0.016097, -0.0118529, 0.992157, -0.124428, -0.0177078, 0.124209, 0.992097, -0.416495, 1.04791, 0.00912793)

[node name="2H_Crossbow" parent="Rig/Skeleton3D/2H_Crossbow" index="0"]
visible = false

[node name="ak472" parent="Rig/Skeleton3D/2H_Crossbow" index="1" instance=ExtResource("3_abk0e")]
transform = Transform3D(0.128196, 3.40617e-05, -2.09608, -1.43144e-05, 2.1, 3.32494e-05, 2.09608, 1.22562e-05, 0.128196, -0.00999999, 0.125, 0.24)

[node name="Knife" parent="Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.0160971, 0.0139627, 0.999772, 0.124428, 0.992157, -0.0118532, -0.992097, 0.124209, -0.0177078, -0.414667, 1.04517, 0.114216)
visible = false

[node name="Throwable" parent="Rig/Skeleton3D" index="4"]
transform = Transform3D(-0.0160971, 0.0139626, 0.999772, 0.124428, 0.992157, -0.0118531, -0.992097, 0.124209, -0.0177078, -0.41215, 1.22401, 0.136604)
visible = false

[node name="Rogue_Cape" parent="Rig/Skeleton3D" index="5"]
transform = Transform3D(0.895987, 0.0111352, -0.443941, -0.146981, 0.950777, -0.272798, 0.419051, 0.309675, 0.853521, 0.0151478, 1.25101, 0.199496)

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_27mb0")
anim_player = NodePath("../AnimationPlayer")
parameters/RunWeapon/blend_amount = 1.0
parameters/Transition/current_state = "Run"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 2

[node name="HitBoxComponent" parent="." index="3" node_paths=PackedStringArray("health_component") instance=ExtResource("4_fx6rw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.319669)
health_component = NodePath("../HealthComponent")

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitBoxComponent" index="0"]
shape = SubResource("CapsuleShape3D_v0w2y")

[node name="HealthComponent" parent="." index="4" instance=ExtResource("5_v0w2y")]

[node name="ShootTimer" type="Timer" parent="." index="5"]
wait_time = 1.5
autostart = true

[node name="BulletSpawnPos" type="Marker3D" parent="." index="6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.456635, 0, 1.50919)

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.32)
shape = SubResource("CapsuleShape3D_atf0n")

[connection signal="timeout" from="ShootTimer" to="." method="_on_shoot_timer_timeout"]
